(function(){var a=function(){for(var b=0;b<window.GSTK.initializers.length;b+=1)this[window.GSTK.initializers[b]]()};a.initializers=[];window.GSTK=a})();(function(){window.GSTK.initializers.push("loadParams");$.extend(window.GSTK.prototype,{loadParams:function(){this.params={};_.each(this._urlSearchString().split("&"),_.bind(function(a){a=a.split("=");this.params[decodeURIComponent(a[0])]=decodeURIComponent(a[1])},this))},_urlSearchString:function(){return document.location.search.replace(/^\?/,"")}})})();
(function(){window.GSTK.initializers.push("verifyDependencies");window.GSTK.initializers.push("verifyId");$.extend(window.GSTK.prototype,{verifyDependencies:function(){if("undefined"===typeof this._jQuery())throw"GSTK requires jQuery 1.9+.";if("undefined"===typeof this._underscore())throw"GSTK requires Underscore.js";},verifyId:function(){if("undefined"===typeof this.params._gsid)throw"GSTK cannot be used outside of a Get Satisfaction community.";},_jQuery:function(){return jQuery},_underscore:function(){return _}})})();
(function(){window.GSTK.initializers.push("loadUser");$.extend(window.GSTK.prototype,{loadUser:function(){this.params._gsuid&&(this.user={id:this.params._gsuid,display_name:this.params._gsudn})}})})();(function(a){a.extend(window.GSTK.prototype,{send:function(b){b="_gstk/"+this.params._gsid+"/"+b;window.parent&&window.parent!==window&&window.parent.postMessage(b,this.params._gso)}})})(jQuery);
(function(a){a.extend(window.GSTK.prototype,{login:function(){this.send("user/login")},logout:function(){this.send("user/logout")},navigate:function(b,a){a?this.send("navigate/"+b+"/"+encodeURIComponent(a)):this.send("navigate/"+b)}})})(jQuery);
(function(){window.GSTK.initializers.push("setupUiEvents");$.extend(window.GSTK.prototype,{setupUiEvents:function(){var a=function(a){return _.bind(function(c){c.preventDefault();a.call(this,c)},this)};$('[data-gstk-action="logout"], [data-gstk-conditional="loggedin"], [data-gstk-display="username"]')[this.user?"show":"hide"]();$('[data-gstk-action="login"], [data-gstk-conditional="loggedout"]')[this.user?"hide":"show"]();$('[data-gstk-action="login"]').click(a.call(this,this.login));$('[data-gstk-action="logout"]').click(a.call(this,
this.logout));$('[data-gstk-action="navigate"]').click(a.call(this,function(a){a=$(a.currentTarget);var c=a.data("gstk-type");"url"===c?this.navigate(c,a.attr("href")):this.navigate(c)}));this.user&&$('[data-gstk-display="username"]').html(this.user.display_name);$('[data-gstk-display="url"]').html(this.params._gsurl)}})})();
(function(){window.GSTK.initializers.push("prepareBody");$.extend(window.GSTK.prototype,{prepareBody:function(){$(document.body).css({fontFamily:"helvetica, arial, sans-serif",height:"auto",margin:0,overflow:"hidden",padding:0,width:"auto"})}})})();
